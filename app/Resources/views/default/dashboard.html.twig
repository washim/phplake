{% extends 'base.html.twig' %}
{% form_theme form 'fields.html.twig' %}
{% block body %}
<div class="col-md-12">
  <section class="page-content-header">
    <h1><i class="fa fa-list"></i> CMS(Most Popular)</h1>
  </section>
</div>
<div class="col-md-4">
  <div class="box box-widget widget-user">
    <div class="widget-user-header bg-light-blue">
      <h3 class="widget-user-username">Develop CMS Projects</h3>
      <h5 class="widget-user-desc">Drupal</h5>
    </div>
    <div class="widget-user-image">
      <img class="img-circle bordernone" src="{{asset('asset/img/icons/drupal-110.png')}}">
    </div>
    <div class="box-footer">
      <div class="row">
        <div class="col-sm-12">
          <div class="description-block">
            <h5 class="description-header">Available Drupal Installer</h5>
            <div class="description-text margin-top-10"><button type="button" class="btn btn-primary project" data-value="drupal-8.1.7" data-url="drupal-8.1.7.tar.gz" data-toggle="modal" data-target="#siteinstall">Install Drupal 8</button> <button type="button" class="btn btn-info project" data-value="drupal-7.50" data-url="drupal-7.50.tar.gz" data-toggle="modal" data-target="#siteinstall">Install Drupal 7</button></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="col-md-4">
  <div class="box box-widget widget-user">
    <div class="widget-user-header bg-olive">
      <h3 class="widget-user-username">Develop CMS Projects</h3>
      <h5 class="widget-user-desc">Joomla</h5>
    </div>
    <div class="widget-user-image">
      <img class="img-circle bordernone" src="{{asset('asset/img/icons/joomla-110.png')}}">
    </div>
    <div class="box-footer">
      <div class="row">
        <div class="col-sm-12">
          <div class="description-block">
            <h5 class="description-header">Available Joomla Installer</h5>
            <div class="description-text margin-top-10"><button type="button" class="btn btn-success project" data-value="joomla" data-url="joomla-3.6.0.tar.gz" data-toggle="modal" data-target="#siteinstall">Install Joomla 3.6.0</button></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="col-md-4">
  <div class="box box-widget widget-user">
    <div class="widget-user-header bg-teal">
      <h3 class="widget-user-username">Develop Blogging Projects</h3>
      <h5 class="widget-user-desc">Wordpress</h5>
    </div>
    <div class="widget-user-image">
      <img class="img-circle bordernone" src="{{asset('asset/img/icons/wp-110.png')}}">
    </div>
    <div class="box-footer">
      <div class="row">
        <div class="col-sm-12">
          <div class="description-block">
            <h5 class="description-header">Available Wordpress Installer</h5>
            <div class="description-text margin-top-10"><button type="button" class="btn btn-warning project" data-value="wordpress" data-url="wordpress-4.5.3.tar.gz" data-toggle="modal" data-target="#siteinstall">Install Wordpress 4.5.3</button></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="modal modal-primary fade" id="siteinstall">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Create Site</h4>
      </div>
      {{ form_start(form) }}
      <div class="modal-body">
        {{ form_row(form.category) }}
        {{ form_row(form.targetUrl) }}
        {{ form_row(form.name, {'attr': {'placeholder': 'My Awesome Site'} }) }}
        <label for="domain">Default Project URL</label>
        <div class="input-group">
          <span class="input-group-addon">dev-</span>
          <input type="text" class="form-control" id="fulldomain" name="projects[fulldomain]" disabled="disabled">
          <span class="input-group-addon">-{{app.user.username}}.phplake.com</span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-warning" id="siteinstall_build">Create Site</button>
      </div>
      {{ form_end(form) }}
    </div>
  </div>
</div>
{% endblock %}

{% block javascript %}
<script>
$(function() {
  $('#fulldomain').val($('#projects_name').val());
  $('.project').click(function(){
    $('#projects_category').val($(this).attr('data-value'));
    $('#projects_targetUrl').val($(this).attr('data-url'));
  });
  $('#projects_name').keyup(function(){
    $('#fulldomain').val($(this).val());
  });
  $('#siteinstall_build').click(function(){
    if ($('#projects_name').val()) {
      $('#siteinstall').modal('toggle');
      $.blockUI({
        message: '<h4><i class="fa fa-refresh fa-spin"></i> Please wait. This might take few minutes to complete.</h4>', 
        css: {'width': '500px'}
      });
    }
  });
  {% if form.vars.valid == false %}
  $('#siteinstall').modal('toggle');
  {% endif %}
});
</script>
{% endblock %}